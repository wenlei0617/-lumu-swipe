(this["webpackJsonp@lumu/swipe-example"]=this["webpackJsonp@lumu/swipe-example"]||[]).push([[0],{13:function(e,t,n){},14:function(e,t,n){"use strict";n.r(t);n(8);var c=n(0),a=n.n(c),r=n(4),u=n.n(r),l=(n(13),n(2)),i=n(6),o=n(5),s=n(1),m="_styles-module__lumu-swipe__32Zvo",f="_styles-module__lumu-swipe__container__3Iq4l",d="_styles-module__lumu-swipe__vertical__oizMu",v="_styles-module__lumu-swipe__item__1pbQR",E="_styles-module__lumu-swipe__dots__3mAX0",b="_styles-module__lumu-swipe__dot__t_Xic",p="_styles-module__lumu-swipe__dots--vertical__2EqZ8",h="_styles-module__lumu-swipe__dot--active__1wZwZ",_=a.a.forwardRef((function(e,t){var n=e.children,r=e.style,u=e.vertical,l=Object(c.useState)(0),i=Object(s.a)(l,2),m=i[0],f=i[1],d=Object(c.useRef)(null);Object(c.useImperativeHandle)(t,(function(){return{setOffset:f}}));var E=Object(c.useMemo)((function(){return Object(o.a)({transform:m?"translate".concat(e.vertical?"Y":"X","(").concat(m,"px)"):""},r)}),[m,r,u]);return a.a.createElement("div",{ref:d,className:v,style:E},n)}));_.displayName="LumuSwipeItem";var O=function(e){var t=e.count,n=e.vertical,a=e.duration,r=e.size,u=e.loop,l=Object(c.useState)(0),i=Object(s.a)(l,2),o=i[0],m=i[1],f=Object(c.useMemo)((function(){return(o+t)%t||0}),[o,t]),d=Object(c.useRef)(null),v=function(){var e=Object(c.useRef)([]);return[e.current,function(t){return function(n){e.current[t]=n}}]}(),E=Object(s.a)(v,2),b=E[0],p=E[1],h=Object(c.useMemo)((function(){return u?-1:0}),[u]),_=Object(c.useMemo)((function(){return u?t:t-1}),[u,t]),O=Object(c.useRef)(1);Object(c.useEffect)((function(){0===f&&(O.current=1),f===t-1&&(O.current=-1)}),[f]);var g=function(e,t){if(e){var c=t.swiping,r=t.offset;e.style.transition="all ".concat(c?0:a,"ms"),e.style.transform="translate".concat(n?"Y":"X","(").concat(r,"px)")}},j=function(){g(d.current,{swiping:!0,offset:-f*r})},w=function(e){var n=e.step,c=void 0===n?0:n,a=e.swiping,l=void 0!==a&&a,i=e.offset,s=void 0===i?0:i;if(!(t<=1)){u&&function(e,n){var c="";(e<0||n>0)&&(c="left"),(e>0||n<0)&&(c="right"),[-1,t-1].includes(o)&&(b[0].setOffset("right"===c?t*r:0),b[b.length-1].setOffset(0)),[t,0].includes(o)&&(b[0].setOffset(0),b[b.length-1].setOffset("right"===c?0:-t*r))}(c,s);var v=Math.min(Math.max(f+c,h),_),E=-v*r+s;l?g(d.current,{swiping:l,offset:E}):requestAnimationFrame((function(){requestAnimationFrame((function(){g(d.current,{swiping:l,offset:E})}))})),m(v)}},y=function(){j(),w({step:1})},k=function(){j(),w({step:-1})};return{swipeRef:d,setRefs:p,current:f,slideTo:w,next:y,prev:k,loopMove:function(){u||1===O.current?y():k()}}},g=function(e){var t=e.current,n=e.vertical,c=e.count;return c<=1?null:a.a.createElement("div",{className:n?p:E},new Array(c).fill(1).map((function(e,n){return a.a.createElement("div",{className:t===n?b+" "+h:b,key:n})})))},j=a.a.forwardRef((function(e,t){var n=e.initialSwipe,r=void 0===n?0:n,u=e.vertical,o=void 0!==u&&u,v=e.duration,E=void 0===v?500:v,b=e.autoplay,p=void 0===b?3e3:b,h=e.touchable,j=void 0===h||h,w=e.loop,y=void 0===w||w,k=e.onSlideChange,N=e.showIndicators,I=void 0===N||N,R=Object(c.useRef)(null),M=function(){var e=Object(c.useRef)(0),t=Object(c.useRef)(0),n=Object(c.useRef)(0),a=Object(c.useRef)(0),r=Object(c.useRef)(0),u=function(){e.current=0,t.current=0,n.current=0,a.current=0,r.current=0};return{move:function(c){r.current&&(n.current=c.touches[0].clientX-e.current,a.current=c.touches[0].clientY-t.current)},start:function(n){u(),r.current=(new Date).getTime(),e.current=n.touches[0].clientX,t.current=n.touches[0].clientY},end:function(){var e=n.current,t=a.current,c=(new Date).getTime()-r.current;return u(),{deltaX:e,deltaY:t,time:c}},getDelta:function(){return{deltaX:n.current,deltaY:a.current}}}}(),S=Object(c.useMemo)((function(){return a.a.Children.count(e.children)}),[e.children]),T=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],t=Object(c.useState)({width:0,height:0}),n=Object(s.a)(t,2),a=n[0],r=n[1],u=Object(c.useRef)(null),l=function(){var e,t=null===(e=u.current)||void 0===e?void 0:e.getBoundingClientRect();t&&r({width:t.width,height:t.height})};return Object(c.useEffect)((function(){l()}),e),{root:u,size:a,changeSize:l}}([S]),x=T.size,X=T.root,z=T.changeSize,C=Object(c.useMemo)((function(){return o?x.height:x.width}),[x,o]),F=Object(c.useMemo)((function(){return o?"height":"width"}),[o]),L=Object(c.useMemo)((function(){return Object(l.a)({},F,C)}),[F,C]),Y=Object(c.useMemo)((function(){return Object(l.a)({},F,C*S)}),[S,C,F]),D=O({count:S,vertical:o,duration:E,size:C,loop:y}),q=D.setRefs,A=D.slideTo,Z=D.next,B=D.prev,H=D.current,J=D.swipeRef,Q=D.loopMove,V=function(){S<=1||p&&(R.current=setTimeout((function(){Q()}),p))},G=function(){R.current&&clearTimeout(R.current),R.current=null},K=function(){if(j){var e=M.end(),t=e.deltaX,n=e.time,c=e.deltaY,a=o?c:t,r=C/2<Math.abs(a)||Math.abs(a/n)>.25?a>0?-1:1:0;A({swiping:!1,step:r}),V()}};Object(c.useEffect)((function(){C&&A({step:r-H,swiping:!0})}),[C,r]),Object(c.useEffect)((function(){return C&&V(),function(){G()}}),[S,p,H,C]),Object(c.useEffect)((function(){k&&k(H)}),[H]);var P,U=function(){var e=Object(c.useState)(!1),t=Object(s.a)(e,2),n=t[0],a=t[1],r=function(){a(document.hidden)};return Object(c.useEffect)((function(){return document.addEventListener("visibilitychange",r),function(){document.removeEventListener("visibilitychange",r)}}),[]),n}();return Object(c.useEffect)((function(){U?G():V()}),[U]),function(e,t,n){var a=n.target,r=Object(i.a)(n,["target"]);Object(c.useEffect)((function(){return null===a||void 0===a||a.addEventListener(e,t,r),function(){null===a||void 0===a||a.removeEventListener(e,t,r)}}),[a])}("touchmove",(function(e){o&&e.preventDefault()}),{passive:!1,target:J.current}),P=function(){G(),z(),V()},Object(c.useEffect)((function(){return console.log(1),window.addEventListener("resize",P),function(){window.removeEventListener("resize",P)}}),[P]),Object(c.useImperativeHandle)(t,(function(){return{next:function(){G(),Z(),V()},prev:function(){G(),B(),V()},slideTo:function(e,t){G(),A({step:e-H,swiping:t}),V()}}})),a.a.createElement("div",{ref:X,onTouchStart:function(e){j&&(G(),M.start(e))},onTouchMove:function(e){if(j){M.move(e);var t=M.getDelta(),n=t.deltaX,c=t.deltaY;A({swiping:!0,offset:o?c:n})}},onTouchCancel:K,onTouchEnd:K,style:e.style,className:"".concat(m)},a.a.createElement("div",{ref:J,style:Y,className:"".concat(f," ").concat(o?d:"")},a.a.Children.map(e.children,(function(e,t){return a.a.isValidElement(e)?e.type!==_?null:a.a.cloneElement(e,{style:L,vertical:o,ref:q(t)}):null}))),I&&a.a.createElement(g,{current:H,vertical:o,count:S}))}));j.displayName="LumuSwipe";var w=j;w.Item=_;var y=w,k=function(){return a.a.createElement(a.a.Fragment,null,a.a.createElement("div",{className:"title"},"\u57fa\u7840\u7528\u6cd5"),a.a.createElement(y,null,a.a.createElement(y.Item,{key:1},a.a.createElement("div",{className:"block red"},"1")),a.a.createElement(y.Item,{key:2},a.a.createElement("div",{className:"block blue"},"2")),a.a.createElement(y.Item,{key:3},a.a.createElement("div",{className:"block green"},"3"))))},N=function(){var e=Object(c.useState)(0),t=Object(s.a)(e,2),n=t[0],r=t[1];return a.a.createElement(a.a.Fragment,null,a.a.createElement("div",{className:"title"},"\u76d1\u542cchange\u4e8b\u4ef6"),a.a.createElement(y,{onSlideChange:r},a.a.createElement(y.Item,{key:1},a.a.createElement("div",{className:"block red"},"1")),a.a.createElement(y.Item,{key:2},a.a.createElement("div",{className:"block blue"},"2")),a.a.createElement(y.Item,{key:3},a.a.createElement("div",{className:"block green"},"3"))),a.a.createElement("div",{className:"desc"},"\u5f53\u524d\u7d22\u5f15\uff1a",n))},I=function(){return a.a.createElement(a.a.Fragment,null,a.a.createElement("div",{className:"title"},"\u7eb5\u5411\u6eda\u52a8"),a.a.createElement(y,{vertical:!0,style:{height:200}},a.a.createElement(y.Item,{key:1},a.a.createElement("div",{className:"block red"},"1")),a.a.createElement(y.Item,{key:2},a.a.createElement("div",{className:"block blue"},"2")),a.a.createElement(y.Item,{key:3},a.a.createElement("div",{className:"block green"},"3"))))},R=function(){return a.a.createElement(a.a.Fragment,null,a.a.createElement("div",{className:"title"},"\u6307\u5b9a\u7d22\u5f15"),a.a.createElement(y,{autoplay:0,initialSwipe:1},a.a.createElement(y.Item,{key:1},a.a.createElement("div",{className:"block red"},"1")),a.a.createElement(y.Item,{key:2},a.a.createElement("div",{className:"block blue"},"2")),a.a.createElement(y.Item,{key:3},a.a.createElement("div",{className:"block green"},"3"))))},M=function(){var e=Object(c.useRef)(null);return a.a.createElement(a.a.Fragment,null,a.a.createElement("div",{className:"title"},"\u63a5\u53e3\u64cd\u4f5c"),a.a.createElement(y,{ref:e,autoplay:0},a.a.createElement(y.Item,{key:1},a.a.createElement("div",{className:"block red"},"1")),a.a.createElement(y.Item,{key:2},a.a.createElement("div",{className:"block blue"},"2")),a.a.createElement(y.Item,{key:3},a.a.createElement("div",{className:"block green"},"3"))),a.a.createElement("div",{className:"desc"},a.a.createElement("button",{onClick:function(){var t;null===(t=e.current)||void 0===t||t.prev()}},"\u4e0a\u4e00\u4e2a"),a.a.createElement("button",{onClick:function(){var t;null===(t=e.current)||void 0===t||t.next()}},"\u4e0b\u4e00\u4e2a"),a.a.createElement("button",{onClick:function(){var t;null===(t=e.current)||void 0===t||t.slideTo(1)}},"\u6307\u5b9a\u8df3\u5230\u7d22\u5f151")))},S=function(){return a.a.createElement(a.a.Fragment,null,a.a.createElement(k,null),a.a.createElement(N,null),a.a.createElement(R,null),a.a.createElement(I,null),a.a.createElement(M,null))};u.a.render(a.a.createElement(S,null),document.getElementById("root"))},7:function(e,t,n){e.exports=n(14)},8:function(e,t,n){}},[[7,1,2]]]);
//# sourceMappingURL=main.06559768.chunk.js.map